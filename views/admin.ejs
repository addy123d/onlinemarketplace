<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@300&family=Poppins:wght@300&family=Josefin+Sans&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
        integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <title>Admin Dashboard</title>
</head>
<style>
    * {
        margin: 0;
        padding: 0;
    }

    body {
        font-family: 'Poppins', sans-serif;
    }

    .products {
        background: #fff;
        background-size: cover;
        min-height: 100vh;
    }

    .products.active {
        filter: blur(10px);
    }

    .grid {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        grid-gap: 20px;
        align-items: stretch;
        background: #fff;
        margin: 4%;
    }



    .grid>article {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        border: 1px solid #ccc;
        box-shadow: 2px 2px 6px 0px rgba(0, 0, 0, 0.3);
        padding: 2em;
    }

    .grid>article img {
        max-width: 100%;
    }

    button {
        display: inline-block;
        border-radius: 4px;
        background-color: #3d405b;
        border: none;
        color: #FFFFFF;
        text-align: center;
        font-size: 17px;
        padding: 16px;
        width: 130px;
        transition: all 0.5s;
        cursor: pointer;
        margin: 5px;
    }

    button span {
        cursor: pointer;
        display: inline-block;
        position: relative;
        transition: 0.5s;
    }

    button span:after {
        content: '»';
        position: absolute;
        opacity: 0;
        top: 0;
        right: -15px;
        transition: 0.5s;
    }

    button:hover span {
        padding-right: 15px;
    }

    button:hover span:after {
        opacity: 1;
        right: 0;
    }

    .content>div {
        margin-top: 4%;
        margin-bottom: 4%;
    }

    .buttons {
        display: flex;
        justify-content: center;

        margin: 5%;
    }

    .container {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        /* #EF4319 #F86C20 #232D36 */
        background: #232D36;
        background: #ffffff;
        padding: 3em;
        position: absolute;
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
        margin-top: 2%;
        opacity: 0;
        pointer-events: none;

        z-index: 20;
    }

    .container.active {
        opacity: 1;
        pointer-events: visible;
    }


    /* Form */
    .form .name,
    .form .topic,
    .form .number,
    .form .btn,
    .form .description {
        position: relative;
        top: 0;
        left: 0;
        display: flex;
        justify-content: center;
    }

    .form h2 {
        text-align: left;
        margin-bottom: 20%;
        border-right: none;
        border-bottom: none;
        border-left: 3px solid #232D36;
        padding: 0.2px 10px;
        color: #232D36;
        font-family: 'Inconsolata', monospace;
        font-size: 1.4rem;
    }

    .form>div {
        margin: 10%;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    input,
    select {
        padding: 1em 1.3em 1em 2.4em;
        border: none;
        background: rgb(245, 245, 245);
        outline: none;
        color: #232D36;
        font-family: 'Josefin Sans', monospace;
    }

    select {
        padding: 1em .5em 1em 1em;
    }

    .name {
        position: relative;
        top: 0;
        left: 0;
    }

    .name i,
    .topic i,
    .number i {
        position: absolute;
        top: 28%;
        left: -8%;
        color: #3b3b3b;
        font-size: .8rem;
    }

    .btn button {
        margin-top: 10%;
        background: #535353;
        color: #f7f7f7;
        padding: 1em 1.5em 1em 1.5em;
        border-radius: 5px;
        border: none;
        font-family: 'Josefin Sans',
            sans-serif;
        text-transform: uppercase;
        cursor: pointer;
        outline: none;
    }

    @media (max-width: 730px) {
        .grid {
            grid-template-columns: 1fr 1fr;
        }
    }

    @media (max-width: 530px) {
        .grid {
            grid-template-columns: 100%;
        }
    }
</style>

<body>
    <div class="container">

        <!-- Form -->
        <div class="form">
            <h2>Add Product</h2>

            <div class="topic">
                <input type="text" name="name" class="productName" placeholder="Product Name" required>
                <i class="fa fa-vcard-o" aria-hidden="true"></i>
            </div>
            <div class="topic">
                <input type="text" name="price" class="productPrice" placeholder="Price" required>
                <i class="fa fa-rupee" aria-hidden="true"></i>
            </div>
            <div class="number">
                <input type="checkbox" name="availability" class="productAvailability" autocomplete="off">
                <label style="padding-left: 10px;">List Now</label>
            </div>
            <div class="btn">
                <button type="submit" class="addProduct_button">Add ▶</button>
            </div>
            <div class="btn">
                <button type="submit" id="cancel">Cancel</button>
            </div>

        </div>
    </div>

    <section class="products">
        <div class="buttons">
            <div class="btn1">
                <button id="add">Add Product</button>
            </div>
            <div class="btn2">
                <a href="/logout"><button>Logout</button></a>
            </div>
        </div>

        <div class="grid">
            <%for(let i=0; i < baseData.length; i++){%>
                <article>
                    <img src="https://img.search.brave.com/IS-MEBaxZHlpkiRK_0gQw-JyEJT4gPfmlk-3vYxzt1Q/rs:fit:632:225:1/g:ce/aHR0cHM6Ly90c2Uy/Lm1tLmJpbmcubmV0/L3RoP2lkPU9JUC5E/QVY5d2ItQlliSkFo/MUl3cDNVeTVRSGFG/aiZwaWQ9QXBp"
                        alt="">
                    <div class="content">
                        <div class="name">
                            <p>Name: <%=baseData[i].name%>
                            </p>
                        </div>
                        <div class="price">
                            <p>Price: <%=baseData[i].base_price%>
                            </p>
                        </div>
                        <div class="quantity">
                            <p>Quantity: <%=baseData[i].availability%>
                            </p>
                        </div>
                    </div>
                </article>
                <%}%>

        </div>

    </section>
</body>

<script>
    const product_name = document.querySelector(".productName");
    const product_price = document.querySelector(".productPrice");
    const product_availability = document.querySelector(".productAvailability");

    const plusButton = document.getElementById("add");
    const cancelButton = document.getElementById("cancel");


    plusButton.addEventListener("click", () => {
        document.querySelector(".container").classList.add("active");
        document.querySelector(".products").classList.add("active");
    })

    cancelButton.addEventListener("click", () => {
        document.querySelector(".container").classList.remove("active");
        document.querySelector(".products").classList.remove("active");
    })

    const addButton = document.querySelector(".addProduct_button");

    addButton.addEventListener("click", () => {
        // For product availability checkbox
        let check = false;
        if(product_availability.checked) check = true;

        let options = {
            method: "POST",
            body: JSON.stringify({
                ProductName: product_name.value,
                ProductPrice: product_price.value,
                ProductAvailability: check
            }),
            headers: new Headers({
                'Content-Type': 'application/json'
            })
        }

        fetch('/basedata', options)
            .then((response) => response.json())
            .then((result) => {
                alert(result.message);

                product_name.value = "";
                product_price.value = "";
                product_availability.value = "";
            })
            .catch(err => console.error("Error: ", err));

    });
</script>

</html>